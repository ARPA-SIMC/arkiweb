Arkiweb
=======
Emanuele Di Giacomo <edigiacomo@arpa.emr.it>
version 0.3.6

Dependencies
------------
Arkiweb needs the following libraries

* `wibble`:
----
wget http://people.debian.org/~enrico/wibble/embeddable/wibble.tar.gz
tar zxf wibble.tar.gz
mv wibble/wibble/* wibble/
----
* `arkimet`: static library and header files

If you edit the javascript files, you must install:

* `node.js` - http://nodejs.org
* `npm` - http://npmjs.org
* `eco` - https://github.com/sstephenson/eco
* `yui-compressor` - http://developer.yahoo.com/yui/compressor

Web services
------------

The web services are installed in `$libdir/arkiweb/cgi-bin`.

To install the services under a web server, you must configure it.

Installation of the web services under Apache 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Installation of the web services under 
`/var/www/arkiweb/services`
----
# mkdir -p /var/www/arkiweb/services
# ln -s $libdir/arkiweb/cgi-bin/* /var/www/arkiweb/services/
----

The services read the environment variable `ARKIWEB_CONF`, which
*is mandatory*. You can set it from the `.htacces`:
----
# /var/www/arkiweb/services/.htaccess
SetEnv ARKIWEB_CONF /etc/arkiweb.config
----
The configuration file is created by `arki-mergeconf`.

Authentication & authorization
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Arkiweb comes with a very simple authorization system. When the global 
variable `ARKIWEB_RESTRICT_VAR` is set, the service looks for the global
variable `${ARKIWEB_RESTRICT_VAR}`. The value of the variable is used for
restricted access (similar to the `--restrict` option of the arkimet 
commands).

Example with Apache basic authentication
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
----
# /var/www/arkiweb/services/.htaccess
...
AuthType Basic
AuthName "By Invitation Only"
AuthUserFile /usr/local/apache/passwd/passwords
Require valid-user
SetEnv ARKIWEB_RESTRICT_VAR REMOTE_USER
----

Website
-------
The website is installed under `$datarootdir/arkiweb/public/`.

* `arkiweb.css`: stylesheet
* `arkiweb.js`: development version
* `arkiweb.min.js`: minified version
* `jquery.arkiweb.js`: jquery plugin
* `ajax-loader.gif`: image
* `index.html`: very simple html with embedded arkiweb.

You can copy these files in your `www` directory (e.g. `/var/www/arkiweb/`)
and edit `index.html`. Otherwise, embed it inside you HTML page.

*Note*: see `index.html` for the javascript dependencies.
