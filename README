Arkiweb
=======
Emanuele Di Giacomo <edigiacomo@arpa.emr.it>
version 0.4

Dependencies
------------
Arkiweb needs the following libraries

* `wibble`:
----
wget http://people.debian.org/~enrico/wibble/embeddable/wibble.tar.gz
tar zxf wibble.tar.gz
mv wibble/wibble/* wibble/
----
* `arkimet`: static library and header files

If you edit the Javascript or CSS files, you must install the 
following programs:

* `node.js`
* `eco` - https://github.com/sstephenson/eco
* `less`
* `uglifyjs`

Web services
------------

The web services are installed in `$libdir/arkiweb/cgi-bin`.

To install the services under a web server, you must configure it.

Installation of the web services under Apache 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Installation of the web services under 
`/var/www/arkiweb/services`
----
# mkdir -p /var/www/arkiweb/services
# ln -s $libdir/arkiweb/cgi-bin/* /var/www/arkiweb/services/
----

The services read the environment variable `ARKIWEB_CONF`, which
*is mandatory*. You can set it from the `.htacces`:
----
# /var/www/arkiweb/services/.htaccess
SetEnv ARKIWEB_CONFIG /etc/arkiweb.config
----
The configuration file is created by `arki-mergeconf`.

Authentication & authorization
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Arkiweb comes with a very simple authorization system. When the global 
variable `ARKIWEB_RESTRICT` is set, the service looks for the global
variable `${ARKIWEB_RESTRICT}`. The value of the variable is used for
restricted access (similar to the `--restrict` option of the arkimet 
commands).

Example with Apache basic authentication
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
----
# /var/www/arkiweb/services/.htaccess
...
AuthType Basic
AuthName "By Invitation Only"
AuthUserFile /usr/local/apache/passwd/passwords
Require valid-user
SetEnv ARKIWEB_RESTRICT REMOTE_USER
----

Website
-------
The website is installed under `$datarootdir/arkiweb/public/`.

* `arkiweb.css`: stylesheet
* `arkiweb.js`: development version
* `arkiweb.min.js`: minified version
* `index.html`: example

You need the following Javascript libraries:

* `jquery`
* `jquery-ui`
* `jquery.layout`
* `jquery.blockUI`
* `jquery-ui-timepicker-addon`
* `underscore`
* `backbone`
* `openlayers`
* `strftime`

You can copy these files in your `www` directory (e.g. `/var/www/arkiweb/`)
and edit `index.html`. 
